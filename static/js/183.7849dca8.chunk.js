"use strict";(self.webpackChunksc_depot=self.webpackChunksc_depot||[]).push([[183,9483],{29201:(e,t,r)=>{r.d(t,{I:()=>v,b:()=>y});var i=r(34981),n=r(26917),s=r(59395),a=r(90080),o=r(94192),l=r(80883),h=r(3799),u=r(21390),d=r(64839),c=r(32307),p=r(70367),g=r(66470),f=r(91911);function y(e){const t=new c.N5,{vertex:r,fragment:y}=t;return(0,h.NB)(r,e),t.include(s.d,e),t.include(o.Z,e),t.include(n.HQ,e),t.include(a.g,e),t.include(f.z,e),t.attributes.add(g.r.POSITION,"vec3"),t.attributes.add(g.r.UV0,"vec2"),e.perspectiveInterpolation&&t.attributes.add(g.r.PERSPECTIVEDIVIDE,"float"),t.varyings.add("vpos","vec3"),e.terrainDepthTest&&t.varyings.add("depth","float"),r.main.add(d.H`
    vpos = position;
    ${e.terrainDepthTest?"depth = (view * vec4(vpos, 1.0)).z;":""}
    vTexCoord = uv0;
    gl_Position = transformPosition(proj, view, vpos);
    ${e.perspectiveInterpolation?"gl_Position *= perspectiveDivide;":""}`),y.uniforms.add(new p.N("tex",(e=>e.texture)),new u.m("opacity",(e=>e.opacity))),t.varyings.add("vTexCoord","vec2"),y.include(l.a),y.main.add(d.H`
    discardBySlice(vpos);
    ${e.terrainDepthTest?"terrainDepthTest(depth);":""}
    ${e.output===i.V.ObjectAndLayerIdColor?"fragColor = vec4(0, 0, 0, 1);\n           return;":""}
    vec4 finalColor = texture(tex, vTexCoord) * opacity;
    outputColorHighlightOID(finalColor, vpos);`),t}const v=Object.freeze(Object.defineProperty({__proto__:null,build:y},Symbol.toStringTag,{value:"Module"}))},39483:(e,t,r)=>{r.r(t),r.d(t,{getGeometryServiceURL:()=>l,projectGeometry:()=>h});var i=r(86560),n=r(50076),s=r(65308),a=r(71334),o=r(70414);async function l(){let e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,r=arguments.length>1?arguments[1]:void 0;if(i.A.geometryServiceUrl)return i.A.geometryServiceUrl;if(!t)throw new n.A("internal:geometry-service-url-not-configured");e="portal"in t?t.portal||s.A.getDefault():t,await e.load({signal:r});const a=e.helperServices?.geometry?.url;if(!a)throw new n.A("internal:geometry-service-url-not-configured");return a}async function h(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=arguments.length>3?arguments[3]:void 0;const s=await l(r,i),h=new o.A({geometries:[e],outSpatialReference:t}),u=await(0,a.C)(s,h,{signal:i});if(u&&Array.isArray(u)&&1===u.length)return u[0];throw new n.A("internal:geometry-service-projection-failed")}},71334:(e,t,r)=>{r.d(t,{C:()=>u});var i=r(3825),n=r(40565),s=r(19902),a=r(54994),o=r(71838),l=r(70414);const h=(0,n.dp)(l.A);async function u(e,t,r){t=h(t);const n=(0,a.Dl)(e),l={...n.query,f:"json",...t.toJSON()},u=t.outSpatialReference,d=(0,s.$B)(t.geometries[0]),c=(0,a.jV)(l,r);return(0,i.A)(n.path+"/project",c).then((e=>{let{data:{geometries:t}}=e;return(0,o.V)(t,d,u)}))}},71838:(e,t,r)=>{r.d(t,{V:()=>s,X:()=>n});var i=r(19902);function n(e){return{geometryType:(0,i.$B)(e[0]),geometries:e.map((e=>e.toJSON()))}}function s(e,t,r){const n=(0,i.xD)(t);return e.map((e=>{const t=n.fromJSON(e);return t.spatialReference=r,t}))}},70414:(e,t,r)=>{r.d(t,{A:()=>u});var i=r(35143),n=r(42553),s=r(46053),a=(r(81806),r(76460),r(47249),r(85842)),o=r(19902),l=r(80963);let h=class extends n.oY{constructor(e){super(e),this.geometries=[],this.outSpatialReference=null,this.transformation=null,this.transformForward=null}toJSON(){const e=this.geometries.map((e=>e.toJSON())),t=this.geometries[0],r={};return r.outSR=(0,l.YX)(this.outSpatialReference),r.inSR=(0,l.YX)(t.spatialReference),r.geometries=JSON.stringify({geometryType:(0,o.$B)(t),geometries:e}),this.transformation&&(r.transformation=this.transformation.wkid||JSON.stringify(this.transformation)),null!=this.transformForward&&(r.transformForward=this.transformForward),r}};(0,i._)([(0,s.MZ)()],h.prototype,"geometries",void 0),(0,i._)([(0,s.MZ)({json:{read:{source:"outSR"}}})],h.prototype,"outSpatialReference",void 0),(0,i._)([(0,s.MZ)()],h.prototype,"transformation",void 0),(0,i._)([(0,s.MZ)()],h.prototype,"transformForward",void 0),h=(0,i._)([(0,a.$)("esri.rest.support.ProjectParameters")],h);const u=h},54994:(e,t,r)=>{r.d(t,{Dl:()=>a,jV:()=>s,lF:()=>o});r(86560),r(55171);var i=r(53084),n=r(90534);r(90924);function s(e,t){return t?{...t,query:{...e??{},...t.query}}:{query:e}}function a(e){return"string"==typeof e?(0,n.An)(e):(0,i.o8)(e)}function o(e,t,r){const i={};for(const n in e){if("declaredClass"===n)continue;const s=e[n];if(null!=s&&"function"!=typeof s)if(Array.isArray(s))i[n]=s.map((e=>o(e)));else if("object"==typeof s)if(s.toJSON){const e=s.toJSON(r?.[n]);i[n]=t?e:JSON.stringify(e)}else i[n]=t?s:JSON.stringify(s);else i[n]=s}return i}},10183:(e,t,r)=>{r.d(t,{A:()=>Z});var i=r(35143),n=r(98773),s=r(54901),a=r(76460),o=r(30726),l=r(50346),h=r(68134),u=r(46053),d=(r(81806),r(47249),r(85842)),c=r(76797),p=r(2413),g=r(57662),f=r(83491),y=r(44815),v=r(75002),m=r(50468),_=r(17345),w=r(62577),x=r(66470);function A(e,t){return(0,w.Gj)(e,[[t[0],t[1],-1],[t[2],t[1],-1],[t[2],t[3],-1],[t[0],t[3],-1]])}function S(e,t,r){if(!(0,p.HY)(t,r))return A(e,r);const i=[t[1]-r[1],Math.min(t[3],r[3])-Math.max(t[1],r[1]),r[3]-t[3],123456],n=[t[0]-r[0],Math.min(t[2],r[2])-Math.max(t[0],r[0]),r[2]-t[2],123456],s=r[2]-r[0],a=r[3]-r[1],o=n[0]>0&&n[2]>0?3:2,l=i[0]>0&&i[2]>0?3:2,h=(l+1)*(o+1),u=(0,y.jh)(3*h),d=(0,v.oe)(2*h),c=new Array(6*(l*o-1));let g=0,f=0,w=0,S=0,E=0;for(let p=0;p<4;p++){const e=i[p];if(e<=0)continue;let t=0;for(let i=0;i<4;i++){const e=n[i];e<=0||(u[f++]=r[0]+t,u[f++]=r[1]+g,u[f++]=-1,d[w++]=t/s,d[w++]=g/a,i<3&&p<3&&(1!==i||1!==p)&&(c[E++]=S,c[E++]=S+1,c[E++]=S+o+1,c[E++]=S+1,c[E++]=S+o+2,c[E++]=S+o+1),S++,t+=e)}g+=e}const R=new Array(c.length);return new _.V(e,[[x.r.POSITION,new m.n(u,c,3,!0)],[x.r.NORMAL,new m.n(I,R,3,!0)],[x.r.UV0,new m.n(d,c,2,!0)]])}const I=[0,0,1];var E=r(40200),R=r(22955),b=r(19539),O=r(57824),T=r(442),P=r(96897),C=r(44513),M=r(30416),D=r(91196),N=r(771),L=r(90992),V=r(93345);let H=class extends((0,N.A)((0,f.w)(D.A))){constructor(){super(...arguments),this.drapeSourceType=g.Om.RasterImage,this.updatePolicy=C.q.SYNC,this.fullExtentInLocalViewSpatialReference=null,this.maximumDataResolution=null,this._images=new Array,this._extents=new Array,this._overlays=new Array,this.updateWhenStationary=!0,this._drapeSourceRenderer=null,this.refreshDebounced=(0,l.sg)((async e=>{this.destroyed||await this._doRefresh(e).catch((e=>{(0,l.zf)(e)||a.A.getLogger(this).error(e)}))}),2e3)}get visibleAtCurrentScale(){const e=this.layer,t="effectiveScaleRange"in e?e.effectiveScaleRange:null;return(0,L.E5)(t,this.view.scale)}initialize(){this._drapeSourceRenderer=this.view.basemapTerrain.overlayManager.registerGeometryDrapeSource(this),this.addHandles((0,s.hA)((()=>this.view.basemapTerrain.overlayManager.unregisterDrapeSource(this)))),this.addResolvingPromise((0,E.V)(this).then((e=>this._set("fullExtentInLocalViewSpatialReference",e)))),this._updatingHandles.add((()=>this.suspended),(()=>this._suspendedChangeHandler()))}destroy(){this.clear()}setDrapingExtent(e,t){this._spatialReference=t,e.forEach(((e,t)=>{this._overlays[t]=e,this._updateImageExtent(e,t)}))}_updateImageExtent(e,t){const r=this._clippedExtent(e.extent,F);if(null==r)return;const i=function(e,t,r){const i=(0,p.VL)(e)/(0,p.uJ)(e),n={width:r,height:r};return i>1.0001?n.height=r/i:i<.9999&&(n.width=r*i),n.width=Math.round(n.width/((0,p.VL)(e)/(0,p.VL)(t))),n.height=Math.round(n.height/((0,p.uJ)(e)/(0,p.uJ)(t))),n}(e.extent,r,e.resolution);let n=e.pixelRatio*this.view.state.pixelRatio;const{layer:s}=this;if("imageMaxWidth"in s&&null!=s.imageMaxWidth||"imageMaxHeight"in s&&null!=s.imageMaxHeight){const e=s.imageMaxWidth,t=s.imageMaxHeight;if(i.width>e){const t=e/i.width;i.height=Math.floor(i.height*t),i.width=e,n*=t}if(i.height>t){const e=t/i.height;i.width=Math.floor(i.width*e),i.height=t,n*=e}}const o=this._extents[t];o&&(0,p.aI)(o.extent,r)&&this._imageSizeEquals(r,o.imageSize,i)||(this._extents[t]={extent:(0,p.vt)(r),imageSize:i,pixelRatio:n},this.suspended||this._fetch(t).catch((e=>{(0,l.zf)(e)||a.A.getLogger(this).error(e)})))}clear(){for(let e=0;e<this._images.length;e++)this._clearImage(e)}async doRefresh(){return this._doRefresh()}async _doRefresh(e){if(this.suspended)return;const t=[];for(let r=0;r<this._extents.length;r++)this._extents[r]&&t.push(this._fetch(r,e));await Promise.allSettled(t)}async processResult(e,t,r){(t instanceof HTMLImageElement||t instanceof HTMLCanvasElement)&&(e.image=t)}findExtentInfoAt(e){for(const t of this._extents){const r=t.extent;if(new c.A(r[0],r[1],r[2],r[3],this._spatialReference).contains(e))return t}return null}getFetchOptions(){}async redraw(e,t){await(0,n.jJ)(this._images,(async(r,i)=>{r&&(await e(r,t),await this._createStageObjects(i,r.image,t))}))}_imageSizeEquals(e,t,r){if(!this.maximumDataResolution)return!1;const i=(0,p.VL)(e)/this.maximumDataResolution.x,n=(0,p.uJ)(e)/this.maximumDataResolution.y,s=i/t.width,a=n/t.height,o=i/r.width,l=n/r.height,h=Math.abs(s-o),u=Math.abs(a-l),d=R.b.TESTS_DISABLE_OPTIMIZATIONS?0:1.5;return h<=d&&u<=d}async _fetch(e,t){if(this.suspended)return;const r=this._extents[e],i=r.extent;this._images[e]||(this._images[e]={texture:null,material:null,renderGeometry:null,loadingPromise:null,loadingAbortController:null,image:null,pixelData:null,renderExtent:(0,p.vt)(i)});const n=this._images[e];n.loadingAbortController=(0,o.DC)(n.loadingAbortController);const s=new c.A(i[0],i[1],i[2],i[3],this._spatialReference);if(0===s.width||0===s.height)return void this._clearImage(e);const h=new AbortController;n.loadingAbortController=h,(0,l.u7)(t,(()=>h.abort()));const u=h.signal,d=this._waitFetchReady(u).then((async()=>{const t={requestAsImageElement:!0,pixelRatio:this._overlays[e].pixelRatio,...this.getFetchOptions(),signal:u},{height:i,width:n}=r.imageSize;return this.layer.fetchImage(s,n,i,t)})).then((e=>{if((0,l.G4)(u))throw a.A.getLogger(this).warnOnce("A call to fetchImage resolved even though the request was aborted. fetchImage should not resolve if options.signal.aborted is true."),(0,l.NK)();return this.processResult(n,e)})).then((()=>{(0,p.C)(n.renderExtent,i)}));n.loadingPromise=d,await this._updatingHandles.addPromise(d.then((async()=>{(0,l.Te)(u),await this._createStageObjects(e,n.image,u)})).catch((e=>{throw e&&!(0,l.zf)(e)&&a.A.getLogger(this).error(e),e})).finally((()=>{d===n.loadingPromise&&(n.loadingPromise=null,n.loadingAbortController=null)})))}_clearImage(e){const t=this._images[e];if(t){null!=t.renderGeometry&&(this._drapeSourceRenderer.removeGeometries([t.renderGeometry],O.q.UPDATE),t.renderGeometry=null);const e=this.view._stage,r=t.texture;r?.unload(),e.remove(r),t.texture=null,e.remove(t.material),t.material=null,t.loadingAbortController=(0,o.DC)(t.loadingAbortController),t.loadingPromise=null,t.image=null,t.pixelData=null}}async _createStageObjects(e,t,r){const i=this.view._stage,s=this._images[e],a=()=>{s.texture?.unload(),i.remove(s.texture),s.texture=null,s.renderGeometry&&(this._drapeSourceRenderer.removeGeometries([s.renderGeometry],O.q.UPDATE),s.renderGeometry=null)};if(t){const o=new P.g(t,{width:t.width,height:t.height,preMultiplyAlpha:!0,wrap:{s:V.pF.CLAMP_TO_EDGE,t:V.pF.CLAMP_TO_EDGE}});let h;if(await(0,n.Ke)(this._images[e===b.vr.INNER?b.vr.OUTER:b.vr.INNER].loadingPromise),(0,l.Te)(r),a(),await i.schedule((()=>o.load(i.renderView.renderingContext)),r),i.add(o),s.texture=o,null==s.material?(s.material=new M.r({textureId:o.id}),i.add(s.material)):s.material.setParameters({textureId:o.id}),e===b.vr.INNER)h=A(s.material,s.renderExtent);else{const e=this._images[0].renderExtent;if(!e)return void a();h=S(s.material,e,s.renderExtent)}s.renderGeometry=new T.$(h),s.renderGeometry.localOrigin=this._overlays[e].renderLocalOrigin,this._drapeSourceRenderer.addGeometries([s.renderGeometry],O.q.UPDATE)}else a(),i.remove(s.material),s.material=null}_clippedExtent(e,t){if("local"!==this.view.viewingMode)return(0,p.C)(t,e);const r=this.view.basemapTerrain;return r.ready?(0,p.E$)(e,r.extent,t):(0,p.C)(t,e)}_suspendedChangeHandler(){this.suspended?this.clear():this.refreshDebounced()}async _waitFetchReady(e){await(0,h.C_)((()=>this.view.stationary),e),(0,l.Te)(e)}};(0,i._)([(0,u.MZ)()],H.prototype,"layer",void 0),(0,i._)([(0,u.MZ)()],H.prototype,"suspended",void 0),(0,i._)([(0,u.MZ)({readOnly:!0})],H.prototype,"fullExtentInLocalViewSpatialReference",void 0),(0,i._)([(0,u.MZ)({readOnly:!0})],H.prototype,"visibleAtCurrentScale",null),(0,i._)([(0,u.MZ)()],H.prototype,"updating",void 0),H=(0,i._)([(0,d.$)("esri.views.3d.layers.DynamicLayerView3D")],H);const Z=H,F=(0,p.vt)()},83491:(e,t,r)=>{r.d(t,{w:()=>u});var i=r(35143),n=r(54901),s=r(50346),a=r(68134),o=r(46053),l=(r(81806),r(76460),r(47249),r(85842)),h=r(47700);const u=e=>{let t=class extends e{constructor(){super(...arguments),this.slicePlaneEnabled=!1,this.supportsHeightUnitConversion=!1}postscript(){super.postscript(),(0,h.jI)(this.layer)&&this.addResolvingPromise(this._validateHeightModelInfo())}async _validateHeightModelInfo(){const e=new AbortController,t=e.signal;this.addHandles((0,n.hA)((()=>e.abort()))),await(0,a.C_)((()=>this.view.defaultsFromMap?.heightModelInfoReady),t),(0,s.Te)(t);const r=(0,h.Hu)(this.layer,this.view.heightModelInfo,this.supportsHeightUnitConversion);if(r)throw r}};return(0,i._)([(0,o.MZ)()],t.prototype,"view",void 0),(0,i._)([(0,o.MZ)()],t.prototype,"slicePlaneEnabled",void 0),t=(0,i._)([(0,l.$)("esri.views.3d.layers.LayerView3D")],t),t}},40200:(e,t,r)=>{r.d(t,{V:()=>s});var i=r(45417),n=r(39483);async function s(e){const t=e.view.spatialReference,r=e.layer.fullExtent,s=null!=r&&r.spatialReference;if(null==r||!s)return null;if(s.equals(t))return r.clone();const a=(0,i.Cv)(r,t);if(null!=a)return a;if(e.view.state.isLocal)try{const i=await(0,n.projectGeometry)(r,t,e.layer.portalItem);return e.destroyed||null==i?null:i}catch{return null}return null}},86401:(e,t,r)=>{r.d(t,{Ci:()=>s,Dq:()=>l,dB:()=>o,zK:()=>a});var i=r(48549),n=r(66470);const s=(0,i.BP)().vec3f(n.r.POSITION),a=(0,i.BP)().vec3f(n.r.POSITION).vec2f(n.r.UV0),o=(0,i.BP)().vec3f(n.r.POSITION).vec4u8(n.r.COLOR),l=(0,i.BP)().vec3f(n.r.POSITION).vec2f(n.r.UV0).vec4u8(n.r.OBJECTANDLAYERIDCOLOR)},30416:(e,t,r)=>{r.d(t,{r:()=>P});var i=r(88105),n=r(34981),s=r(83490),a=r(75803),o=r(45463),l=r(60322),h=r(77730),u=r(86994),d=r(66470),c=r(82809),p=r(86401),g=r(63928),f=r(52757),y=(r(64839),r(16506)),v=r(59246),m=r(72001),_=r(96643),w=r(29201),x=r(57162);class A extends v.w{constructor(e,t,i){super(e,t,new y.$(w.I,(()=>r.e(8391).then(r.bind(r,48391)))),i,S)}_getPipelineState(e,t){const{oitPass:r,output:i,hasOccludees:s,enableOffset:a,cullFace:o}=e,h=r===m.Y.NONE,u=r===m.Y.FrontFace;return(0,x.Ey)({blending:i===n.V.Color?h?x.Os:(0,l.ez)(r):null,culling:(0,x.Xt)(o),depthTest:{func:(0,l.K_)(r)},depthWrite:(0,l.z5)(e),drawBuffers:(0,l.m6)(r,i),colorWrite:x.kn,stencilWrite:s?_.v0:null,stencilTest:s?t?_.a9:_.qh:null,polygonOffset:h||u?null:(0,l.aB)(a)})}initializePipeline(e){return this._occludeePipeline=this._getPipelineState(e,!0),this._getPipelineState(e,!1)}getPipeline(e){return e?this._occludeePipeline:super.getPipeline()}}const S=new Map([[d.r.POSITION,0],[d.r.UV0,2],[d.r.PERSPECTIVEDIVIDE,3]]);var I=r(35143),E=r(97808),R=r(42717),b=r(6485),O=r(94570);class T extends O.E{constructor(){super(...arguments),this.cullFace=s.s2.None,this.hasSlicePlane=!1,this.enableOffset=!0,this.writeDepth=!0,this.hasOccludees=!1,this.terrainDepthTest=!1,this.cullAboveTerrain=!1,this.perspectiveInterpolation=!0,this.textureCoordinateType=E.I.None,this.emissionSource=R.ZX.None,this.discardInvisibleFragments=!0,this.occlusionPass=!1,this.objectAndLayerIdColorInstanced=!1}}(0,I._)([(0,b.W)({count:s.s2.COUNT})],T.prototype,"cullFace",void 0),(0,I._)([(0,b.W)()],T.prototype,"hasSlicePlane",void 0),(0,I._)([(0,b.W)()],T.prototype,"enableOffset",void 0),(0,I._)([(0,b.W)()],T.prototype,"writeDepth",void 0),(0,I._)([(0,b.W)()],T.prototype,"hasOccludees",void 0),(0,I._)([(0,b.W)()],T.prototype,"terrainDepthTest",void 0),(0,I._)([(0,b.W)()],T.prototype,"cullAboveTerrain",void 0),(0,I._)([(0,b.W)()],T.prototype,"perspectiveInterpolation",void 0);class P extends g.W{constructor(e){super(e,D),this._configuration=new T,this.vertexAttributeLocations=S,this.supportsEdges=!0,this.produces=new Map([[h.N.OPAQUE_MATERIAL,e=>(0,n.CL)(e)],[h.N.TRANSPARENT_MATERIAL,e=>(0,n._o)(e)&&this.parameters.writeDepth],[h.N.TRANSPARENT_MATERIAL_WITHOUT_DEPTH,e=>(0,n._o)(e)&&!this.parameters.writeDepth],[h.N.DRAPED_MATERIAL,e=>(0,n._o)(e)||(0,n.CL)(e)]])}getConfiguration(e,t){return this._configuration.output=e,this._configuration.cullFace=this.parameters.cullFace,this._configuration.hasSlicePlane=this.parameters.hasSlicePlane,this._configuration.writeDepth=this.parameters.writeDepth,this._configuration.hasOccludees=t.hasOccludees,this._configuration.oitPass=t.oitPass,this._configuration.enableOffset=t.camera.relativeElevation<l.xt,this._configuration.terrainDepthTest=t.terrainDepthTest,this._configuration.cullAboveTerrain=t.cullAboveTerrain,this._configuration.perspectiveInterpolation=this.parameters.perspectiveInterpolation,this._configuration}get visible(){return!0}createGLMaterial(e){return new C(e)}createBufferWriter(){const e=p.zK.clone();return this.parameters.perspectiveInterpolation&&e.f32(d.r.PERSPECTIVEDIVIDE),new M(e)}}class C extends a.m8{constructor(e){super({...e,...e.material.parameters})}beginSlot(e){return this.updateTexture(this._material.parameters.textureId),this._material.setParameters(this.textureBindParameters),this.acquireTechnique(A,e)}}class M extends c.Z{write(e,t,r,n,s,a){for(const o of this.vertexBufferLayout.fields.keys()){const n=r.get(o);if(n)if(o===d.r.PERSPECTIVEDIVIDE){(0,u.vA)(1===n.size);const e=s.getField(o,i.Y$);e&&(0,f.uO)(n,e,a)}else(0,f.zC)(o,n,e,t,s,a)}}}class D extends o.qA{constructor(){super(...arguments),this.writeDepth=!0,this.hasSlicePlane=!1,this.cullFace=s.s2.None,this.opacity=1,this.textureId=null,this.initTextureTransparent=!0,this.perspectiveInterpolation=!1}}},63928:(e,t,r)=>{r.d(t,{W:()=>s});var i=r(45463),n=r(48168);class s extends i.im{intersect(e,t,r,i,s,a){return(0,n.Uy)(e,r,i,s,void 0,a)}}},91196:(e,t,r)=>{r.d(t,{A:()=>f});var i=r(35143),n=r(91967),s=r(54099),a=r(5632),o=r(76460),l=r(30726),h=r(91291),u=r(46053),d=(r(81806),r(47249),r(85842)),c=r(19451),p=r(90992);let g=class extends((0,a.sA)((0,h.g)(s.A.EventedMixin(n.A)))){constructor(e){super(e),this._updatingHandles=new c.U,this.layer=null,this.parent=null}initialize(){this.when().catch((e=>{if("layerview:create-error"!==e.name){const t=this.layer&&this.layer.id||"no id",r=this.layer?.title||"no title";o.A.getLogger(this).error("#resolve()",`Failed to resolve layer view (layer title: '${r}', id: '${t}')`,e)}}))}destroy(){this._updatingHandles=(0,l.pR)(this._updatingHandles)}get fullOpacity(){return(this.layer?.opacity??1)*(this.parent?.fullOpacity??1)}get suspended(){return this.destroyed||!this.canResume()}get suspendInfo(){return this.getSuspendInfo()}get legendEnabled(){return!this.suspended&&!0===this.layer?.legendEnabled}get updating(){return!(!this._updatingHandles?.updating&&!this.isUpdating())}get updatingProgress(){return this.updating?0:1}get updateSuspended(){return this.suspended}get visible(){return!0===this.layer?.visible}set visible(e){this._overrideIfSome("visible",e)}get visibleAtCurrentScale(){return!0}get visibleAtCurrentTimeExtent(){const e=this.view.timeExtent,t=this.layer?.visibilityTimeExtent;return!e||!t||!e.intersection(t).isEmpty}canResume(){const e=this.layer&&"effectiveScaleRange"in this.layer?this.layer.effectiveScaleRange:null;return this.visible&&this.layer?.loaded&&!this.parent?.suspended&&this.view?.ready&&(0,p.g7)(e)&&this.visibleAtCurrentScale&&this.visibleAtCurrentTimeExtent||!1}getSuspendInfo(){const e=this.parent?.suspended?this.parent.suspendInfo:{};this.view?.ready||(e.viewNotReady=!0),this.layer&&this.layer.loaded||(e.layerNotLoaded=!0);const t=this.layer&&"effectiveScaleRange"in this.layer?this.layer.effectiveScaleRange:null;return(0,p.g7)(t)&&this.visibleAtCurrentScale||(e.outsideScaleRange=!0),this.visibleAtCurrentTimeExtent||(e.outsideVisibilityTimeExtent=!0),this.visible||(e.layerInvisible=!0),e}isUpdating(){return!1}};(0,i._)([(0,u.MZ)()],g.prototype,"view",void 0),(0,i._)([(0,u.MZ)()],g.prototype,"fullOpacity",null),(0,i._)([(0,u.MZ)()],g.prototype,"layer",void 0),(0,i._)([(0,u.MZ)()],g.prototype,"parent",void 0),(0,i._)([(0,u.MZ)({readOnly:!0})],g.prototype,"suspended",null),(0,i._)([(0,u.MZ)({readOnly:!0})],g.prototype,"suspendInfo",null),(0,i._)([(0,u.MZ)({readOnly:!0})],g.prototype,"legendEnabled",null),(0,i._)([(0,u.MZ)({type:Boolean,readOnly:!0})],g.prototype,"updating",null),(0,i._)([(0,u.MZ)({readOnly:!0})],g.prototype,"updatingProgress",null),(0,i._)([(0,u.MZ)()],g.prototype,"updateSuspended",null),(0,i._)([(0,u.MZ)()],g.prototype,"visible",null),(0,i._)([(0,u.MZ)({readOnly:!0})],g.prototype,"visibleAtCurrentScale",null),(0,i._)([(0,u.MZ)({readOnly:!0})],g.prototype,"visibleAtCurrentTimeExtent",null),g=(0,i._)([(0,d.$)("esri.views.layers.LayerView")],g);const f=g},771:(e,t,r)=>{r.d(t,{A:()=>l});var i=r(35143),n=r(76460),s=r(50346),a=r(68134),o=(r(81806),r(47249),r(50076),r(85842));const l=e=>{let t=class extends e{initialize(){this.addHandles((0,a.on)((()=>this.layer),"refresh",(e=>{this.doRefresh(e.dataChanged).catch((e=>{(0,s.zf)(e)||n.A.getLogger(this).error(e)}))})),"RefreshableLayerView")}};return t=(0,i._)([(0,o.$)("esri.views.layers.RefreshableLayerView")],t),t}}}]);
//# sourceMappingURL=183.7849dca8.chunk.js.map