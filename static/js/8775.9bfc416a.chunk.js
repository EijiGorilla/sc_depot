"use strict";(self.webpackChunksc_depot=self.webpackChunksc_depot||[]).push([[8775,6141],{77176:(t,e,n)=>{n.d(e,{b:()=>s});var r=n(15941),o=n(38496);function s(t,e,n){const s=Array.isArray(t),f=s?t.length/e:t.byteLength/(4*e),u=s?t:new Uint32Array(t,0,f*e),g=n?.minReduction??0,d=n?.originalIndices||null,h=d?d.length:0,p=n?.componentOffsets||null;let N=0;if(p)for(let r=0;r<p.length-1;r++){const t=p[r+1]-p[r];t>N&&(N=t)}else N=f;const I=Math.floor(1.1*N)+1;(null==l||l.length<2*I)&&(l=new Uint32Array((0,r.cU)(2*I)));for(let r=0;r<2*I;r++)l[r]=0;let A=0;const O=!!p&&!!d,m=O?h:f;let S=(0,o.my)(f);const v=new Uint32Array(h),w=1.96;let E=0!==g?Math.ceil(4*w*w/(g*g)*g*(1-g)):m,T=1,y=p?p[1]:m;for(let r=0;r<m;r++){if(r===E){const t=1-A/r;if(t+w*Math.sqrt(t*(1-t)/r)<g)return null;E*=2}if(r===y){for(let t=0;t<2*I;t++)l[t]=0;if(d)for(let t=p[T-1];t<p[T];t++)v[t]=S[d[t]];y=p[++T]}const t=O?d[r]:r,n=t*e,o=a(u,n,e);let s=o%I,c=A;for(;0!==l[2*s+1];){if(l[2*s]===o){const t=l[2*s+1]-1;if(i(u,n,t*e,e)){c=S[t];break}}s++,s>=I&&(s-=I)}c===A&&(l[2*s]=o,l[2*s+1]=t+1,A++),S[t]=c}if(0!==g&&1-A/f<g)return null;if(O){for(let t=p[T-1];t<v.length;t++)v[t]=S[d[t]];S=(0,o.Dg)(v)}const P=s?new Array(A):new Uint32Array(A*e);A=0;for(let r=0;r<m;r++)S[r]===A&&(c(u,(O?d[r]:r)*e,P,A*e,e),A++);if(d&&!O){const t=new Uint32Array(h);for(let e=0;e<t.length;e++)t[e]=S[d[e]];S=(0,o.Dg)(t)}return{buffer:Array.isArray(P)?P:P.buffer,indices:S,uniqueCount:A}}function i(t,e,n,r){for(let o=0;o<r;o++)if(t[e+o]!==t[n+o])return!1;return!0}function c(t,e,n,r,o){for(let s=0;s<o;s++)n[r+s]=t[e+s]}function a(t,e,n){let r=0;for(let o=0;o<n;o++)r=t[e+o]+r|0,r=r+(r<<11)+(r>>>2)|0;return r>>>0}let l=null},96141:(t,e,n)=>{n.d(e,{EdgeInputBufferLayout:()=>i,In:()=>f,gr:()=>l,vG:()=>u,vJ:()=>c,wO:()=>a});var r=n(57481),o=n(48549),s=n(66470);const i=(0,o.BP)().vec3f(s.r.POSITION).u16(s.r.COMPONENTINDEX).freeze(),c=(0,o.BP)().vec2u8(s.r.SIDENESS).freeze(),a=(0,r.U)(c),l=(0,o.BP)().vec3f(s.r.POSITION0).vec3f(s.r.POSITION1).vec2i16(s.r.NORMALCOMPRESSED).u16(s.r.COMPONENTINDEX).u8(s.r.VARIANTOFFSET,{glNormalized:!0}).u8(s.r.VARIANTSTROKE).u8(s.r.VARIANTEXTENSION,{glNormalized:!0}).freeze(),f=(0,o.BP)().vec3f(s.r.POSITION0).vec3f(s.r.POSITION1).vec2i16(s.r.NORMALCOMPRESSED).vec2i16(s.r.NORMAL2COMPRESSED).u16(s.r.COMPONENTINDEX).u8(s.r.VARIANTOFFSET,{glNormalized:!0}).u8(s.r.VARIANTSTROKE).u8(s.r.VARIANTEXTENSION,{glNormalized:!0}).freeze(),u=new Map([[s.r.POSITION0,0],[s.r.POSITION1,1],[s.r.COMPONENTINDEX,2],[s.r.VARIANTOFFSET,3],[s.r.VARIANTSTROKE,4],[s.r.VARIANTEXTENSION,5],[s.r.NORMALCOMPRESSED,6],[s.r.NORMAL2COMPRESSED,7],[s.r.SIDENESS,8]])},69413:(t,e,n)=>{n.d(e,{T:()=>I,k:()=>A});var r=n(47249),o=n(20664),s=n(9392),i=n(57481),c=n(25672),a=n(96141);class l{updateSettings(t){this.settings=t,this._edgeHashFunction=t.reducedPrecision?h:d}write(t,e,n){m.seed=this._edgeHashFunction(n);const r=m.getIntRange(0,255),o=m.getIntRange(0,this.settings.variants-1),s=m.getFloat(),i=255*(.5*function(t,e){return Math.abs(t)**e*Math.sign(t)}(-(1-Math.min(s/.7,1))+Math.max(0,s-.7)/(1-.7),1.2)+.5);t.position0.setVec(e,n.position0),t.position1.setVec(e,n.position1),t.componentIndex.set(e,n.componentIndex),t.variantOffset.set(e,r),t.variantStroke.set(e,o),t.variantExtension.set(e,i)}}const f=new Float32Array(6),u=new Uint32Array(f.buffer),g=new Uint32Array(1);function d(t){return f[0]=t.position0[0],f[1]=t.position0[1],f[2]=t.position0[2],f[3]=t.position1[0],f[4]=t.position1[1],f[5]=t.position1[2],g[0]=31*(31*(31*(31*(31*(166811+u[0])+u[1])+u[2])+u[3])+u[4])+u[5],g[0]}function h(t){const e=f;e[0]=N(t.position0[0]),e[1]=N(t.position0[1]),e[2]=N(t.position0[2]),e[3]=N(t.position1[0]),e[4]=N(t.position1[1]),e[5]=N(t.position1[2]),g[0]=5381;for(let n=0;n<u.length;n++)g[0]=31*g[0]+u[n];return g[0]}const p=1e4;function N(t){return Math.round(t*p)/p}class I{constructor(){this._commonWriter=new l}updateSettings(t){this._commonWriter.updateSettings(t)}allocate(t){return a.gr.createBuffer(t)}write(t,e,n){this._commonWriter.write(t,e,n),(0,o.g)(O,n.faceNormal0,n.faceNormal1),(0,o.n)(O,O);const{typedBuffer:r,typedBufferStride:s}=t.normalCompressed;(0,c.aT)(r,e,O[0],O[1],O[2],s)}}I.Layout=a.gr,I.glLayout=(0,i.U)(a.gr,1);class A{constructor(){this._commonWriter=new l}updateSettings(t){this._commonWriter.updateSettings(t)}allocate(t){return a.In.createBuffer(t)}write(t,e,n){this._commonWriter.write(t,e,n);{const{typedBuffer:r,typedBufferStride:o}=t.normalCompressed;(0,c.aT)(r,e,n.faceNormal0[0],n.faceNormal0[1],n.faceNormal0[2],o)}{const{typedBuffer:r,typedBufferStride:o}=t.normal2Compressed;(0,c.aT)(r,e,n.faceNormal1[0],n.faceNormal1[1],n.faceNormal1[2],o)}}}A.Layout=a.In,A.glLayout=(0,i.U)(a.In,1);const O=(0,s.vt)(),m=new r.A},7150:(t,e,n)=>{n.d(e,{K:()=>a});var r=n(15941),o=n(68930),s=n(20664),i=n(9392);const c=-1;function a(t,e,n){const r=t.vertices.position,o=t.vertices.componentIndex,i=p.position0,a=p.position1,u=p.faceNormal0,d=p.faceNormal1,{edges:h,normals:N}=f(t),I=h.length/4,A=e.allocate(I);let O=0;const m=I,w=n?.allocate(m);let T=0,y=0,P=0;g.length=0;for(let c=0;c<I;++c){const t=4*c;r.getVec(h.data[t],i),r.getVec(h.data[t+1],a);const e=g.pushNew();e.index=4*c,e.length=(0,s.j)(i,a)}g.sort(((t,e)=>e.length-t.length));const M=new Array,R=new Array;g.forAll((t=>{let{length:f,index:g}=t;const I=h.data[g],m=h.data[g+1],L=h.data[g+2],V=h.data[g+3],C=V===c;if(r.getVec(I,i),r.getVec(m,a),C){const t=3*L;(0,s.i)(u,N.data[t],N.data[t+1],N.data[t+2]),(0,s.c)(d,u),p.componentIndex=o.get(I),p.cosAngle=(0,s.f)(u,d)}else{let t=3*L;if((0,s.i)(u,N.data[t],N.data[t+1],N.data[t+2]),t=3*V,(0,s.i)(d,N.data[t],N.data[t+1],N.data[t+2]),p.componentIndex=o.get(I),p.cosAngle=(0,s.f)(u,d),function(t,e){return t.cosAngle>e}(p,v))return;p.cosAngle<-.9999&&(0,s.c)(d,u)}y+=f,P++,C||function(t,e){return t.cosAngle<e}(p,E)?(e.write(A,O++,p),M.push(f)):l(p,S)&&(w&&n&&n.write(w,T++,p),R.push(f))}));const L=new Float32Array(M.reverse()),V=new Float32Array(R.reverse()),C=w&&n?{instancesData:w.slice(0,T),lodInfo:{lengths:V}}:void 0;return{regular:{instancesData:A.slice(0,O),lodInfo:{lengths:L}},silhouette:C,averageEdgeLength:y/P}}function l(t,e){const n=(0,r.XM)(t.cosAngle);return(0,s.o)(I,t.position1,t.position0),n*((0,s.f)((0,s.e)(N,t.faceNormal0,t.faceNormal1),I)>0?-1:1)>e}function f(t){const e=t.faces.length/3,n=t.faces,r=t.neighbors,o=t.vertices.position;d.length=h.length=0;for(let i=0;i<e;i++){const t=3*i,e=r[t],a=r[t+1],l=r[t+2],f=n[t],u=n[t+1],g=n[t+2];o.getVec(f,A),o.getVec(u,O),o.getVec(g,m),(0,s.d)(O,O,A),(0,s.d)(m,m,A),(0,s.e)(A,O,m),(0,s.n)(A,A),h.pushArray(A),(e===c||f<u)&&(d.push(f),d.push(u),d.push(i),d.push(e)),(a===c||u<g)&&(d.push(u),d.push(g),d.push(i),d.push(a)),(l===c||g<f)&&(d.push(g),d.push(f),d.push(i),d.push(l))}return{edges:d,normals:h}}class u{constructor(){this.index=0,this.length=0}}const g=new o.A({allocator:t=>t||new u,deallocator:null}),d=new o.A({deallocator:null}),h=new o.A({deallocator:null}),p=new class{constructor(){this.position0=(0,i.vt)(),this.position1=(0,i.vt)(),this.faceNormal0=(0,i.vt)(),this.faceNormal1=(0,i.vt)(),this.componentIndex=0,this.cosAngle=0}},N=(0,i.vt)(),I=(0,i.vt)(),A=(0,i.vt)(),O=(0,i.vt)(),m=(0,i.vt)(),S=(0,r.kU)(4),v=Math.cos(S),w=(0,r.kU)(35),E=Math.cos(w)},8775:(t,e,n)=>{n.d(e,{o6:()=>f,extractComponentsEdgeLocationsLayout:()=>N,hx:()=>u,Jb:()=>p});var r=n(77176);function o(t,e,n){const r=e/3,o=new Uint32Array(n+1),s=new Uint32Array(n+1),i=(t,e)=>{t<e?o[t+1]++:s[e+1]++};for(let I=0;I<r;I++){const e=t[3*I],n=t[3*I+1],r=t[3*I+2];i(e,n),i(n,r),i(r,e)}let c=0,a=0;for(let I=0;I<n;I++){const t=o[I+1],e=s[I+1];o[I+1]=c,s[I+1]=a,c+=t,a+=e}const l=new Uint32Array(6*r),f=o[n],u=(t,e,n)=>{if(t<e){const r=o[t+1]++;l[2*r]=e,l[2*r+1]=n}else{const r=s[e+1]++;l[2*f+2*r]=t,l[2*f+2*r+1]=n}};for(let I=0;I<r;I++){const e=t[3*I],n=t[3*I+1],r=t[3*I+2];u(e,n,I),u(n,r,I),u(r,e,I)}const g=(t,e)=>{const n=2*t,r=e-t;for(let o=1;o<r;o++){const t=l[n+2*o],e=l[n+2*o+1];let r=o-1;for(;r>=0&&l[n+2*r]>t;r--)l[n+2*r+2]=l[n+2*r],l[n+2*r+3]=l[n+2*r+1];l[n+2*r+2]=t,l[n+2*r+3]=e}};for(let I=0;I<n;I++)g(o[I],o[I+1]),g(f+s[I],f+s[I+1]);const d=new Int32Array(3*r),h=(e,n)=>e===t[3*n]?0:e===t[3*n+1]?1:e===t[3*n+2]?2:-1,p=(t,e)=>{const n=h(t,e);d[3*e+n]=-1},N=(t,e,n,r)=>{const o=h(t,e);d[3*e+o]=r;const s=h(n,r);d[3*r+s]=e};for(let I=0;I<n;I++){let t=o[I];const e=o[I+1];let n=s[I];const r=s[I+1];for(;t<e&&n<r;){const e=l[2*t],r=l[2*f+2*n];e===r?(N(I,l[2*t+1],r,l[2*f+2*n+1]),t++,n++):e<r?(p(I,l[2*t+1]),t++):(p(r,l[2*f+2*n+1]),n++)}for(;t<e;)p(I,l[2*t+1]),t++;for(;n<r;)p(l[2*f+2*n],l[2*f+2*n+1]),n++}return d}var s=n(48549),i=n(66470),c=n(96141),a=n(69413),l=n(7150);function f(t){const e=u(t.data,t.skipDeduplicate,t.indices,t.indicesLength);return d.updateSettings(t.writerSettings),h.updateSettings(t.writerSettings),(0,l.K)(e,d,h)}function u(t,e,n,s){if(e){const e=o(n,s,t.count);return new g(n,s,e,t)}const i=(0,r.b)(t.buffer,t.stride/4,{originalIndices:n,originalIndicesLength:s}),a=o(i.indices,s,i.uniqueCount);return{faces:i.indices,facesLength:i.indices.length,neighbors:a,vertices:c.EdgeInputBufferLayout.createView(i.buffer)}}class g{constructor(t,e,n,r){this.faces=t,this.facesLength=e,this.neighbors=n,this.vertices=r}}const d=new a.T,h=new a.k,p=(0,s.BP)().vec3f(i.r.POSITION0).vec3f(i.r.POSITION1),N=(0,s.BP)().vec3f(i.r.POSITION0).vec3f(i.r.POSITION1).u16(i.r.COMPONENTINDEX)}}]);
//# sourceMappingURL=8775.9bfc416a.chunk.js.map