"use strict";(self.webpackChunksc_depot=self.webpackChunksc_depot||[]).push([[2544],{62544:(e,a,r)=>{r.r(a),r.d(a,{fromUrl:()=>c});var t=r(50076),n=r(90534),l=r(13096),i=r(39323),s=r(11668),o=r(31933),u=r(62487),y=r(67061);const d={FeatureLayer:!0,SceneLayer:!0};async function c(e){var a;const u=null===(a=e.properties)||void 0===a?void 0:a.customParameters,c=await async function(e,a){let r=(0,l.qg)(e);if(null==r&&(r=await async function(e,a){var r,t;const i=await(0,y.V)(e,{customParameters:a});let s=null,o=null;const u=i.type;if("Feature Layer"===u||"Table"===u?(s="FeatureServer",o=null!==(r=i.id)&&void 0!==r?r:null):"indexedVector"===u?s="VectorTileServer":i.hasOwnProperty("mapName")?s="MapServer":i.hasOwnProperty("bandCount")&&i.hasOwnProperty("pixelSizeX")?s="ImageServer":i.hasOwnProperty("maxRecordCount")&&i.hasOwnProperty("allowGeometryUpdates")?s="FeatureServer":i.hasOwnProperty("streamUrls")?s="StreamServer":f(i)?(s="SceneServer",o=i.id):i.hasOwnProperty("layers")&&f(null===(t=i.layers)||void 0===t?void 0:t[0])&&(s="SceneServer"),!s)return null;const d=null!=o?(0,l.iz)(e):null;return{title:null!=d&&i.name||(0,n.e7)(e),serverType:s,sublayer:o,url:{path:null!=d?d.serviceUrl:(0,n.An)(e).path}}}(e,a)),null==r)throw new t.A("arcgis-layers:url-mismatch","The url '${url}' is not a valid arcgis resource",{url:e});const{serverType:u,sublayer:c}=r;let v;const w={FeatureServer:"FeatureLayer",StreamServer:"StreamLayer",VectorTileServer:"VectorTileLayer"},h="FeatureServer"===u,m="SceneServer"===u,p={parsedUrl:r,Constructor:null,layerId:(h||m)&&null!==c&&void 0!==c?c:void 0,layers:[],tables:[]};switch(u){case"MapServer":v=null!=c?"FeatureLayer":await async function(e,a){return(await(0,y.V)(e,{customParameters:a})).tileInfo}(e,a)?"TileLayer":"MapImageLayer";break;case"ImageServer":{var L;const r=await(0,y.V)(e,{customParameters:a}),{tileInfo:t,cacheType:n}=r;v=t?"LERC"!==(null===t||void 0===t||null===(L=t.format)||void 0===L?void 0:L.toUpperCase())||n&&"elevation"!==n.toLowerCase()?"ImageryTileLayer":"ElevationLayer":"ImageryLayer";break}case"SceneServer":{const e=await(0,y.V)(r.url.path,{customParameters:a});if(v="SceneLayer",e){const a=null===e||void 0===e?void 0:e.layers;if("Voxel"===(null===e||void 0===e?void 0:e.layerType))v="VoxelLayer";else if(null!==a&&void 0!==a&&a.length){var S;const e=null===(S=a[0])||void 0===S?void 0:S.layerType;null!=e&&null!=o.XX[e]&&(v=o.XX[e])}}break}case"FeatureServer":if(v="FeatureLayer",null!=c){const r=await(0,y.V)(e,{customParameters:a});p.sourceJSON=r,"Oriented Imagery Layer"===r.type&&(v="OrientedImageryLayer")}break;default:v=w[u]}if(d[v]&&null==c){var I;const r=await async function(e,a,r){var t,n;let l,o,u=!1;switch(a){case"FeatureServer":{const a=await(0,s.Q)(e,{customParameters:r});u=!!a.layersJSON,l=a.layersJSON||a.serviceJSON;break}case"SceneServer":{const a=await async function(e,a){var r;const t=await(0,y.V)(e,{customParameters:a}),n=null===(r=t.layers)||void 0===r?void 0:r[0];if(!n)return{serviceInfo:t};try{const{serverUrl:r}=await(0,i.L)(e),n=await(0,y.V)(r,{customParameters:a}).catch((()=>null));return n&&(t.tables=n.tables),{serviceInfo:t,tableServerUrl:r}}catch{return{serviceInfo:t}}}(e,r);l=a.serviceInfo,o=a.tableServerUrl;break}default:l=await(0,y.V)(e,{customParameters:r})}const d=null===(t=l)||void 0===t?void 0:t.layers,c=null===(n=l)||void 0===n?void 0:n.tables;return{layers:(null===d||void 0===d?void 0:d.map((e=>({id:e.id}))).reverse())||[],tables:(null===c||void 0===c?void 0:c.map((e=>({serverUrl:o,id:e.id}))).reverse())||[],layerInfos:u?d:[],tableInfos:u?c:[]}}(e,u,a);if(h&&(p.sublayerInfos=r.layerInfos,p.tableInfos=r.tableInfos),1!==r.layers.length+r.tables.length)p.layers=r.layers,p.tables=r.tables,h&&(null===(I=r.layerInfos)||void 0===I?void 0:I.length)&&(p.sublayerConstructorProvider=await async function(e){const a=[],r=[];if(e.forEach((e=>{const{type:t}=e;"Oriented Imagery Layer"===t?(a.push(t),r.push(b("OrientedImageryLayer"))):(a.push(t),r.push(b("FeatureLayer")))})),!r.length)return;const t=await Promise.all(r),n=new Map;return a.forEach(((e,a)=>{n.set(e,t[a])})),e=>n.get(e.type)}(r.layerInfos));else if(h||m){var P,g,O,T,V,F;const e=null!==(P=null===(g=r.layerInfos)||void 0===g?void 0:g[0])&&void 0!==P?P:null===(O=r.tableInfos)||void 0===O?void 0:O[0];p.layerId=null!==(T=null===(V=r.layers[0])||void 0===V?void 0:V.id)&&void 0!==T?T:null===(F=r.tables[0])||void 0===F?void 0:F.id,p.sourceJSON=e,h&&"Oriented Imagery Layer"===(null===e||void 0===e?void 0:e.type)&&(v="OrientedImageryLayer")}}return p.Constructor=await b(v),p}(e.url,u),w={...e.properties,url:e.url};if(c.layers.length+c.tables.length===0)return null!=c.layerId&&(w.layerId=c.layerId),null!=c.sourceJSON&&(w.sourceJSON=c.sourceJSON),new c.Constructor(w);const h=new(0,(await r.e(4604).then(r.bind(r,4604))).default)({title:c.parsedUrl.title});return await async function(e,a,r){function t(e,a,t,n){const l={...r,layerId:a,sublayerTitleMode:"service-name"};return null!=e&&(l.url=e),null!=t&&(l.sourceJSON=t),n(l)}const n=a.sublayerConstructorProvider;for(const{id:i,serverUrl:s}of a.layers){var l;const r=v(a.sublayerInfos,i),o=null!==(l=r&&(null===n||void 0===n?void 0:n(r)))&&void 0!==l?l:a.Constructor,u=t(s,i,r,(e=>new o(e)));e.add(u)}if(a.tables.length){const r=await b("FeatureLayer");a.tables.forEach((n=>{let{id:l,serverUrl:i}=n;const s=t(i,l,v(a.tableInfos,l),(e=>new r(e)));e.tables.add(s)}))}}(h,c,w),h}function v(e,a){return e?e.find((e=>e.id===a)):null}function f(e){return null!=e&&e.hasOwnProperty("store")&&e.hasOwnProperty("id")&&"number"==typeof e.id}async function b(e){return(0,u.S[e])()}},11668:(e,a,r)=>{r.d(a,{Q:()=>n});var t=r(67061);async function n(e,a){var r;const n=await(0,t.V)(e,a);y(n),s(n);const l={serviceJSON:n};if((null!==(r=n.currentVersion)&&void 0!==r?r:0)<10.5)return l;const i=await(0,t.V)(e+"/layers",a);return y(i),s(i),l.layersJSON={layers:i.layers,tables:i.tables},l}function l(e){return"Feature Layer"===e.type||"Oriented Imagery Layer"===e.type}function i(e){return"Table"===e.type}function s(e){var a,r;e.layers=null===(a=e.layers)||void 0===a?void 0:a.filter(l),e.tables=null===(r=e.tables)||void 0===r?void 0:r.filter(i)}function o(e){e.type||(e.type="Feature Layer")}function u(e){e.type||(e.type="Table")}function y(e){var a,r;null!==(a=e.layers)&&void 0!==a&&a.forEach(o),null===(r=e.tables)||void 0===r||r.forEach(u)}},62487:(e,a,r)=>{r.d(a,{S:()=>t});const t={BingMapsLayer:async()=>(await r.e(3993).then(r.bind(r,13993))).default,BuildingSceneLayer:async()=>(await Promise.resolve().then(r.bind(r,82740))).default,CSVLayer:async()=>(await r.e(1365).then(r.bind(r,1365))).default,DimensionLayer:async()=>(await r.e(126).then(r.bind(r,70126))).default,ElevationLayer:async()=>(await r.e(3875).then(r.bind(r,23875))).default,FeatureLayer:async()=>(await Promise.resolve().then(r.bind(r,38451))).default,GeoJSONLayer:async()=>(await r.e(709).then(r.bind(r,50709))).default,GeoRSSLayer:async()=>(await r.e(2551).then(r.bind(r,52551))).default,GroupLayer:async()=>(await r.e(4604).then(r.bind(r,4604))).default,ImageryLayer:async()=>(await Promise.all([r.e(9122),r.e(6333),r.e(7480),r.e(610)]).then(r.bind(r,20610))).default,ImageryTileLayer:async()=>(await Promise.all([r.e(6333),r.e(9844),r.e(7874),r.e(7480),r.e(2557)]).then(r.bind(r,22557))).default,IntegratedMeshLayer:async()=>(await r.e(2825).then(r.bind(r,32825))).default,KMLLayer:async()=>(await r.e(2712).then(r.bind(r,72712))).default,LineOfSightLayer:async()=>(await r.e(7873).then(r.bind(r,62635))).default,LinkChartLayer:async()=>(await Promise.all([r.e(7216),r.e(3620),r.e(8383),r.e(2790),r.e(2547),r.e(1746)]).then(r.bind(r,81746))).default,MapImageLayer:async()=>(await Promise.all([r.e(9122),r.e(7872),r.e(5721),r.e(2951)]).then(r.bind(r,82951))).default,MapNotesLayer:async()=>(await r.e(3616).then(r.bind(r,73616))).default,MediaLayer:async()=>(await r.e(1221).then(r.bind(r,11221))).default,OGCFeatureLayer:async()=>(await Promise.all([r.e(6799),r.e(5526)]).then(r.bind(r,1741))).default,OpenStreetMapLayer:async()=>(await r.e(803).then(r.bind(r,50803))).default,OrientedImageryLayer:async()=>(await r.e(2593).then(r.bind(r,52593))).default,PointCloudLayer:async()=>(await r.e(1830).then(r.bind(r,11830))).default,RouteLayer:async()=>(await Promise.all([r.e(1297),r.e(1301)]).then(r.bind(r,91301))).default,SceneLayer:async()=>(await r.e(9882).then(r.bind(r,39882))).default,StreamLayer:async()=>(await r.e(4369).then(r.bind(r,84369))).default,SubtypeGroupLayer:async()=>(await r.e(9005).then(r.bind(r,69005))).default,TileLayer:async()=>(await Promise.all([r.e(9122),r.e(7872),r.e(5721),r.e(1174)]).then(r.bind(r,71174))).default,UnknownLayer:async()=>(await r.e(8896).then(r.bind(r,8896))).default,UnsupportedLayer:async()=>(await r.e(2043).then(r.bind(r,72043))).default,VectorTileLayer:async()=>(await Promise.all([r.e(5995),r.e(5170)]).then(r.bind(r,53451))).default,VoxelLayer:async()=>(await r.e(8893).then(r.bind(r,8893))).default,WFSLayer:async()=>(await Promise.all([r.e(1316),r.e(6964)]).then(r.bind(r,4583))).default,WMSLayer:async()=>(await r.e(2015).then(r.bind(r,52015))).default,WMTSLayer:async()=>(await r.e(1845).then(r.bind(r,1845))).default,WebTileLayer:async()=>(await r.e(4552).then(r.bind(r,24552))).default}},67061:(e,a,r)=>{r.d(a,{V:()=>n});var t=r(3825);async function n(e,a){const{data:r}=await(0,t.A)(e,{responseType:"json",query:{f:"json",...null===a||void 0===a?void 0:a.customParameters,token:null===a||void 0===a?void 0:a.apiKey}});return r}}}]);
//# sourceMappingURL=2544.8cd9cdc4.chunk.js.map